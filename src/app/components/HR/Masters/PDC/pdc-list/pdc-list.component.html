<div class="view-wrapper list-page">
  <div class="grid-container">
    <dx-data-grid
      #dataGrid
      noDataText="No data available"
      [width]="'100%'"
      [height]="'75vh'"
      [loadPanel]="{
        enabled: true,
        text: 'Loading...',
        showIndicator: true,
        showPane: true
      }"
      class="grid theme-dependent"
      [dataSource]="PDCListDataSource"
      [showBorders]="true"
      [showColumnLines]="true"
      [columnAutoWidth]="false"
      [wordWrapEnabled]="false"
      [rowAlternationEnabled]="true"
      [allowColumnReordering]="true"
      [showColumnHeaders]="true"
      [columnAutoWidth]="true"
      [allowColumnResizing]="true"
      [columnResizingMode]="'nextColumn'"
      [headerFilter]="{ visible: true, allowSearch: true }"
      [scrolling]="{ mode: 'standard' }"
      rowAlternationInterval="2"
      [selection]="{ mode: 'single' }"
      focusStateEnabled="false"
      [groupPanel]="{ visible: true }"
      [grouping]="{ autoExpandAll: false }"
      (onEditingStart)="onEditPDC($event)"
      (onRowRemoving)="DeletePDC($event)"
    >
      <dxo-editing
        mode="popup"
        [allowUpdating]="canEdit"
        [allowDeleting]="canDelete"
      ></dxo-editing>

      <dxo-paging [pageSize]="20"></dxo-paging>
      <dxo-pager
        [visible]="true"
        [displayMode]="displayMode"
        [showPageSizeSelector]="showPageSizeSelector"
        [showInfo]="true"
        [showNavigationButtons]="true"
      ></dxo-pager>
      <dxo-load-panel [showPane]="false"></dxo-load-panel>
      <dxo-scrolling mode="standard"></dxo-scrolling>
      <!-- <dxo-filter-row
        [visible]="isFilterRowVisible"
        [applyFilter]="auto"
      ></dxo-filter-row> -->
      <dxo-toolbar>
        <dxi-item location="before">
          
          <h6>PDC</h6>
          </dxi-item>
         
         
        <dxi-item location="after" locateInMenu="auto"> </dxi-item>

   <!-- <div class="toolbar-margin-top "> -->
        <dxi-item location="center" locateInMenu="auto">
             <dx-radio-group
  [items]="priorities"
  [(value)]="selectedType"
  layout="horizontal"
  displayExpr="name"
  [stylingMode]="'outlined'"
   (onValueChanged)="onTypeChanged($event)"
  
>
</dx-radio-group>
</dxi-item>

 <dxi-item location="after" locateInMenu="auto">
          <dx-select-box
            displayExpr="label"
            valueExpr="id"
            displayExpr="name"
            label="Status"
            labelMode="floating"
            [width]="220"
            [searchEnabled]="true"
            [acceptCustomValue]="true"
            [items]="StatusfilterOptions"
            [(value)]="selectedStatus"
            (onValueChanged)="onStatusChanged()"
          ></dx-select-box>
        </dxi-item>

         <dxi-item location = "after">
         <dx-select-box
         label="Due Date"
         labelMode="floating"
         [dataSource]="dateRanges"
         [displayExpr]="'label'"
        valueExpr="value"
        [(value)]="selectedDateRange"
        (onValueChanged)="onDateRangeChanged($event)"
         >
        <div *dxTemplate="let item of 'item'">
          {{ item.value === 'custom' ? 'Custom' : item.label }}
        </div>
        </dx-select-box>
        </dxi-item>

         <dxi-item location = "after">
         <dx-select-box
         label="Entry Date between"
         labelMode="floating"
        [dataSource]="entryDateRanges"
         [displayExpr]="'label'"
        valueExpr="value"
        [(value)]="selectedEntryDateRange"
       (onValueChanged)="onEntryDateRangeChanged($event)"
         >
         <div *dxTemplate="let item of 'item'">
          {{ item.value === 'custom' ? 'Custom' : item.label }}
        </div>
        </dx-select-box>
        </dxi-item>

        <dxi-item
          location="after"
          *ngIf="canAdd"
          widget="dxButton"
          [options]="addButtonOptions"
        ></dxi-item>
        <!-- </div> -->
      </dxo-toolbar>

      <dxo-grouping
        [autoExpandAll]="false"
        [contextMenuEnabled]="true"
        [expandMode]="'rowClick'"
      ></dxo-grouping>
      <dxi-column dataField="ENTRY_NO" caption="Entry No."></dxi-column>
       <dxi-column dataField="ENTRY_DATE" caption="Entry date"></dxi-column>
      <dxi-column dataField="BENEFICIARY_NAME" caption="Beneficiary Name"></dxi-column>
      <dxi-column dataField="CHEQUE_NO" caption="Cheque No."></dxi-column>
       <dxi-column dataField="CHEQUE_DATE" caption="Due date."></dxi-column>
      <dxi-column
        dataField="AMOUNT"
        caption="Amount"
        [format]="{ type: 'fixedPoint', precision: 2 }"
      ></dxi-column>
       <dxi-column dataField="REMARKS" caption="Remarks"></dxi-column>
       <dxi-column
          dataField="ENTRY_STATUS"
          caption="Status"
          [cellTemplate]="statusCellRender"
          width="100  "
          alignment="right"
        >
    </dxi-column>

    <dxi-column
  type="buttons"
  [buttons]="gridButtons">
</dxi-column>
    </dx-data-grid>

    <dx-popup
      [(visible)]="addPDCPopupOpened"
      [width]="'50vw'"
      [height]="'70vh'"
      title="Add PDC"
      (onHiding)="handleClose()"
    >
      <app-pdc-add-form
        [isOpen]="addPDCPopupOpened"
        
        (formClosed)="handleClose()"
      ></app-pdc-add-form>
    </dx-popup>
  </div>
</div>

<dx-popup
  [(visible)]="editPDCPopupOpened"
  [width]="'50vw'"
  [height]="'75vh'"
  title="Edit PDC"
   (onHiding)="handleClose()"
>
  <app-pdc-edit-form
    [selectedPDC]="selectedPDC"
    [isOpen]="editPDCPopupOpened"
    [isReadOnly]="isEditReadOnly"
    (formClosed)="handleClose()"
  ></app-pdc-edit-form>
</dx-popup>

<dx-popup
  [(visible)]="showCustomDatePopup"
  [width]="'300px'"
  title="iSelect Custom Date Range"
  [showCloseButton]="true"
  [dragEnabled]="false"
  [closeOnOutsideClick]="true"
  [height]="'300px'"
>
  <div class="p-3">
    <dx-date-box
      [(value)]="customStartDate"
      type="date"
     displayFormat="dd-MM-yyyy"
      label="From Date"
    >
    </dx-date-box>

    <dx-date-box
      [(value)]="customEndDate"
      type="date"
      displayFormat="dd-MM-yyyy"
      label="To Date"
    >
    </dx-date-box>

   <dx-button
  text="Apply"
  type="default"
  stylingMode="contained"
  (onClick)="applyCustomDateFilter()"
  class="mt-3"
></dx-button>

  </div>
</dx-popup>

<dx-popup
  [(visible)]="showEntryCustomDatePopup"
  [width]="'300px'"
  title="Select Custom Date Range"
  [showCloseButton]="true"
  [dragEnabled]="false"
  [closeOnOutsideClick]="true"
  [height]="'300px'"
>
  <div class="p-3">
    <dx-date-box
      [(value)]="entrycustomStartDate"
      type="date"
      displayFormat="dd-MM-yyyy"
      label="From Date"
    >
    </dx-date-box>

    <dx-date-box
      [(value)]="entrycustomEndDate"
      type="date"
      displayFormat="dd-MM-yyyy"
      label="To Date"
    >
    </dx-date-box>

   <dx-button
  text="Apply"
  type="default"
  stylingMode="contained"
  (onClick)="applyEntryCustomDateFilter()"
  class="mt-3"
></dx-button>

  </div>
</dx-popup>