<div class="salary-grid-wrapper">
  <div class="grid-container">
    <dx-data-grid
      [dataSource]="payRollData.PAY_DETAILS"
      [showBorders]="true"
      [showColumnLines]="true"
      [columnAutoWidth]="false"
      [wordWrapEnabled]="false"
      [rowAlternationEnabled]="true"
      [headerFilter]="{ visible: true }"
      [allowColumnReordering]="true"
      [showColumnHeaders]="true"
      [columnAutoWidth]="true"
      [allowColumnResizing]="true"
      [height]="'50vh'"
      [columnResizingMode]="'nextColumn'"
      [headerFilter]="{ visible: true }"
      [scrolling]="{ mode: 'virtual' }"
      rowAlternationInterval="2"
      [selection]="{ mode: 'single' }"
     
      (onEditorPreparing)="onEditorPreparing($event)"
      (onContentReady)="onContentReady($event)"
      (onRowInserted)="onRowInserted($event)"
      (onRowRemoved)="onRowRemoved($event)"
    >
      <dxo-load-panel [showPane]="false"></dxo-load-panel>
      <dxo-scrolling mode="standard"></dxo-scrolling>
      <!-- <dxo-filter-row [visible]="showFilterRow"></dxo-filter-row> -->
      <dxo-filter-builder [allowHierarchicalFields]="true">
      </dxo-filter-builder>
      <dxo-toolbar>
        <dxi-item location="before" locateInMenu="auto">
          <div class="stacked-toolbar-group">
            <dx-text-box
              class="custom-select-box"
              [placeholder]="'Select Employee'"
              label="Salary Month"
              [labelMode]="'floating'"
              [(value)]="payRollData.MONTH"
              [readOnly]="true"
            ></dx-text-box>
            <dx-text-box
              class="custom-text-box"
              [placeholder]="'Employee '"
              label="Employee"
              [labelMode]="'floating'"
              [(value)]="payRollData.EMPLOYEE_NAME"
              [width]="200"
              [readOnly]="true"
            ></dx-text-box>
          </div>
        </dxi-item>
        <dxi-item location="before" locateInMenu="auto">
          <div class="stacked-toolbar-group basic-salary-container">
            <dx-text-box
              class="basic-salary-box"
              [showClearButton]="true"
              label="Basic Salary"
              [labelMode]="'floating'"
              [(value)]="payRollData.BASIC_SALARY"
              [width]="180"
              [readOnly]="true"
            ></dx-text-box>
          </div>
        </dxi-item>

        <dxi-item location="after" locateInMenu="auto">
          <div class="stacked-toolbar-group"></div>
          <div class="stacked-toolbar-group">
            <dx-number-box
              [placeholder]="'OT Hours'"
              [label]="'OT Hours'"
              [labelMode]="'floating'"
              [(value)]="payRollData.OT_HOURS"
              [width]="180"
              [min]="0"
              [max]="12"
              [readOnly]="true"
            ></dx-number-box>
          </div>
        </dxi-item>
        <dxi-item location="after" locateInMenu="auto">
          <div class="stacked-toolbar-group">
            <dx-text-box
              [placeholder]="'Worked Days'"
              label="Worked Days"
              [labelMode]="'floating'"
              [(value)]="payRollData.WORKED_DAYS"
              [width]="180"
              [readOnly]="true"
            ></dx-text-box>
            <div style="display: flex; align-items: center; gap: 3px">
              <dx-number-box
                [placeholder]="'Less Hours'"
                [label]="'Less Hours'"
                [labelMode]="'floating'"
                [(value)]="payRollData.LESS_HOURS"
                [width]="180"
                [min]="0"
                [max]="12"
                [readOnly]="true"
              ></dx-number-box>

              
            </div>
          </div>
        </dxi-item>
      </dxo-toolbar>
      <dxi-column
        dataField="SNO"
        caption="Sl. No"
        [width]="70"
        [allowEditing]="false"
      ></dxi-column>

      <dxi-column
        dataField="HEAD_ID"
        caption="Salary Head"
        [allowEditing]="false"
        [lookup]="{
          dataSource: salaryHeadList,
          valueExpr: 'ID',
          displayExpr: 'HEAD_NAME'
        }"
      >
      </dxi-column>

      <!-- <dxi-column dataField="REMARKS" caption="Remarks"></dxi-column> -->
      <dxi-column
        dataField="GROSS_AMOUNT"
        caption="Gross"
        dataType="number"
        [width]="180"
        [allowEditing]="false"
        [format]="{ type: 'fixedPoint', precision: 2 }"
        [editorOptions]="{ format: '#,##0.00' }"
      ></dxi-column>
      <dxi-column
        dataField="DEDUCTION_AMOUNT"
        caption="Deduction"
        [format]="{ type: 'fixedPoint', precision: 2 }"
        dataType="number"
        [width]="140"
        [allowEditing]="false"
        [editorOptions]="{ format: '#,##0.00' }"
      ></dxi-column>
      
      <dxo-summary>
        <dxi-total-item
          column="GROSS_AMOUNT"
          summaryType="sum"
          [valueFormat]="customFormat"
          displayFormat="Grand Total: {0}"
          showInColumn="GROSS_AMOUNT"
        >
        </dxi-total-item>

        <dxi-total-item
          column="DEDUCTION_AMOUNT"
          summaryType="sum"
          [valueFormat]="customFormat"
          displayFormat="{0}"
          showInColumn="DEDUCTION_AMOUNT"
        >
        </dxi-total-item>
      </dxo-summary>
    </dx-data-grid>
    <div
      style="
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 10px;
      "
    >
      <!-- Left Section: Leave Salary and End of Service -->
      <div style="display: flex; gap: 20px; align-items: center"></div>

      <!-- Right Section: Net Payable -->
      <div style="display: flex; align-items: center">
        <label style="margin-right: 10px; min-width: 100px">Net Payable:</label>
        <dx-number-box
          [value]="payRollData.NET_AMOUNT"
          [readOnly]="true"
          width="200"
          dataType="number"
          dataType="number"
          [editorOptions]="{ format: '#,##0.00' }"
          [format]="{ type: 'fixedPoint', precision: 2 }"
          [rtlEnabled]="true"
        ></dx-number-box>
      </div>
    </div>

    <div
      style="display: flex; align-items: center; gap: 20px; margin-top: 10px"
    >
      <div style="flex: 1"></div>
    </div>
  </div>
</div>

<div class="form-popup-buttons-container">
  <div class="popup-footer">
    <dx-button
      text="Cancel"
      stylingMode="outlined"
      type="normal"
      (onClick)="handleClose()"
    ></dx-button>

  </div>
</div>
