<dx-validation-group #journalVoucherGroup>
  <div
    class="invoice-wrapper"
    style="
      height: 70vh;
      display: flex;
      flex-direction: column;

      box-sizing: border-box;
    "
  >
    <div class="salary-grid-wrapper" style="padding: 0 20px">
      <div class="grid-container">
        <dx-data-grid
          #itemsGridRef
          [dataSource]="mainInvoiceGridList"
          [showBorders]="true"
          [showRowLines]="true"
          [showColumnLines]="true"
          [columnAutoWidth]="false"
          [wordWrapEnabled]="false"
          [rowAlternationEnabled]="true"
          [headerFilter]="{ visible: true, allowSearch: true }"
          [allowColumnReordering]="true"
          [showColumnHeaders]="true"
          [columnAutoWidth]="true"
          [allowColumnResizing]="true"
          [height]="'55vh'"
          [width]="'auto'"
          [columnResizingMode]="'nextColumn'"
          [scrolling]="{ mode: 'virtual' }"
          rowAlternationInterval="2"
          [selection]="{ mode: 'single' }"
        >
          <dxo-load-panel [showPane]="false"></dxo-load-panel>
          <dxo-filter-builder [allowHierarchicalFields]="true">
          </dxo-filter-builder>
          <dxo-toolbar>
            <div
              class="stacked-toolbar-group"
              style="display: flex; flex-direction: column; gap: 2px"
            ></div>
            <dxi-item location="before" locateInMenu="auto">
              <div
                class="stacked-toolbar-group"
                style="display: flex; flex-direction: column; gap: 5px"
              >
                <div style="display: flex; gap: 5px">
                  <dx-text-box
                    #invoiceBoxRef
                    [(value)]="invoiceFormData.SALE_NO"
                    label="Invoice No."
                    labelMode="floating"
                    [width]="200"
                    [readOnly]="true"
                  ></dx-text-box>
                </div>
                <div
                  style="
                    margin-top: 4px;
                    display: flex;
                    align-items: flex-start;
                    gap: 16px;
                    margin-bottom: 24px;
                  "
                >
                  <!-- Radio Group -->

                  <!-- Company Select -->
                  <!-- <dx-select-box
                    [(value)]="invoiceFormData.UNIT_ID"
                    [dataSource]="companyList"
                    displayExpr="COMPANY_NAME"
                    valueExpr="COMPANY_ID"
                    [width]="300"
                    label="Company"
                    labelMode="floating"
                    style="margin-top: -1px"
                    [readOnly]="true"
                  >
                  </dx-select-box> -->

                  <!-- Distributor Select -->
                  <dx-select-box
                    [(value)]="invoiceFormData.DISTRIBUTOR_ID"
                    [dataSource]="distributorList"
                    displayExpr="DESCRIPTION"
                    valueExpr="ID"
                    [width]="300"
                    label="Customer"
                    labelMode="floating"
                    style="margin-top: -1px"
                    [readOnly]="true"
                  >
                  </dx-select-box>
                </div>
              </div>
            </dxi-item>
            <dxi-item location="after" locateInMenu="auto">
              <div class="stacked-toolbar-group"></div>
            </dxi-item>
            <dxi-item location="after" locateInMenu="auto">
              <div
                class="stacked-toolbar-group"
                style="display: flex; flex-direction: column; gap: 2px"
              >
                <!-- Row 1: Date only -->
                <div
                  style="display: flex; gap: 2px; justify-content: flex-end"
                ></div>
                <div
                  style="
                    display: flex;
                    gap: 0px;
                    margin-top: 38px;
                    margin-bottom: 0;
                  "
                >
                  <dx-date-box
                    label="Transaction Date"
                    [(value)]="invoiceFormData.SALE_DATE"
                    [displayFormat]="'dd-MM-yyyy'"
                    type="date"
                    labelMode="floating"
                    [width]="200"
                    [readOnly]="true"
                  ></dx-date-box>
                </div>
              </div>
            </dxi-item>
          </dxo-toolbar>

          <dxi-column
            dataField="TRANSFER_NO"
            caption="Transfer No"
            [width]="120"
          ></dxi-column>
          <dxi-column
            dataField="TRANSFER_DATE"
            caption="Date"
            dataType="date"
            format="dd-MM-yyyy"
            [width]="120"
          ></dxi-column>
          <dxi-column
            dataField="ARTICLE"
            caption="Item Description"
            [width]="150"
          ></dxi-column>
          <dxi-column
            dataField="TOTAL_PAIR_QTY"
            caption="Total Pair Qty"
            dataType="number"
            [width]="120"
          ></dxi-column>
          <dxi-column
            dataField="PRICE"
            caption="Price"
            dataType="number"
            format="#,##0.00"
            [width]="100"
            [allowEditing]="true"
          ></dxi-column>
          <dxi-column
            dataField="AMOUNT"
            caption="Amount"
            dataType="number"
            format="#,##0.00"
            [width]="120"
            [allowEditing]="false"
          ></dxi-column>
          <dxi-column
            dataField="GST"
            caption="TAX%"
            dataType="number"
            format="#,##0.00"
            [width]="80"
            [allowEditing]="true"
          ></dxi-column>
          <dxi-column
            dataField="TAX_AMOUNT"
            caption="Tax Amount"
            dataType="number"
            format="#,##0.00"
            [width]="100"
            [allowEditing]="false"
          ></dxi-column>
          <dxi-column
            dataField="TOTAL_AMOUNT"
            caption="Total"
            dataType="number"
            format="#,##0.00"
            [width]="120"
            [allowEditing]="false"
          ></dxi-column>
          <dxo-summary>
            <dxi-total-item
              column="AMOUNT"
              summaryType="sum"
              valueFormat="#,##0.00"
              displayFormat="{0}"
              alignment="right"
            ></dxi-total-item>

            <dxi-total-item
              column="TAX_AMOUNT"
              summaryType="sum"
              valueFormat="#,##0.00"
              displayFormat="{0}"
              alignment="right"
            ></dxi-total-item>

            <dxi-total-item
              column="TOTAL_AMOUNT"
              summaryType="sum"
              valueFormat="#,##0.00"
              displayFormat="{0}"
              alignment="right"
              [allowEditing]="true"
            ></dxi-total-item>
          </dxo-summary>
        </dx-data-grid>
        <div
          style="
            width: 100%;
            display: flex;
            justify-content: flex-end;
            margin-top: 15px;
          "
        >
          <!-- <dx-check-box
            [(value)]="invoiceFormData.IS_APPROVED"
            text="Approved"
            [width]="200"
            [readOnly]="true"
          ></dx-check-box> -->
        </div>

        <div class="form-popup-buttons-container">
          <div class="popup-footer">
            <dx-button
              text="Cancel"
              (onClick)="cancelPopup()"
              stylingMode="outlined"
              type="normal"
            ></dx-button>
          </div>
        </div>
      </div>
    </div>
  </div>
</dx-validation-group>
