 
 <div class="grid-container">
    <dx-data-grid
      [dataSource]="AgedList_Datasource"
      width="100%"
      noDataText=""
      height="75vh"
      width="100%"
      [showBorders]="true"
      [showColumnLines]="true"
      [columnAutoWidth]="true"
      [wordWrapEnabled]="false"
        [grouping]="{ autoExpandAll: false }"
      [filterRow]="{ visible: false }"
      [rowAlternationEnabled]="true"
      [rowAlternationEnabled]="true"
      rowAlternationInterval="2"
      [allowColumnReordering]="true"
      [filterRow]="{ visible: false }"
      id="dataGrid"
      [headerFilter]="{ visible: false }"
      [columnFixing]="{
        enabled: true,
        texts: { fix: 'Freeze', unfix: 'Unfreeze' }
      }"

      [export]="{ enabled: true, formats: ['xlsx', 'pdf'] }"
       [summary]="summaryColumnsData"
       (onExporting)="onExporting($event)"
      [loadPanel]="{ enabled: true, text: 'Loading...',  }"
    >
    
      <dxo-paging [pageSize]="10"></dxo-paging>
       <dxo-export [enabled]="true" [formats]="['xlsx', 'pdf']"> </dxo-export>
      <dxo-pager
        [visible]="true"
        [allowedPageSizes]="allowedPageSizes"
        [displayMode]="displayMode"
        [showPageSizeSelector]="true"
        [showInfo]="true"
        [showNavigationButtons]="true"
      ></dxo-pager>
      <!-- <dxo-toolbar>
        <dxi-item location="before">
          <div
            class="grid-header"
            style="font-weight: 600; font-size: 20px; margin-left: 12px"
          >
            Trial Balance
          </div>
        </dxi-item>
      </dxo-toolbar> -->
     
      <dxo-toolbar>
        <dxi-item location="before">
          <div class="grid-header" style="font-weight: 600 ;font-size: 20px; margin-left: 12px; padding: -3px; margin-right: 3px;">
    Aged Receivables
          </div>
        </dxi-item>
         <dxi-item>
           <dx-select-box
        [width]="200"
        label="Customer"
        labelMode="floating"
         [items]="customer_list"
    displayExpr="DESCRIPTION"
    valueExpr="ID"
    [(value)]="select_customer_id"
    [searchEnabled]="true"
    (onValueChanged)="onCompanyChange($event)"
        >

        </dx-select-box>

        </dxi-item> 
           <dxi-item>
           <!-- <dx-date-box
        [width]="200"
        label="Date From"
        labelMode="floating"
  [displayFormat]="'dd-MM-yyyy'"
          (onValueChanged)="onFromDateChange($event)"
        ></dx-date-box> -->
      

        </dxi-item>
           <dxi-item>
           <dx-date-box
        [width]="200"
        label="As on Date"
        labelMode="floating"
        [displayFormat]="'dd-MM-yyyy'"
          [value]="defaultDate"

        (onValueChanged)="onToDateChange($event)"
        >
        </dx-date-box>

        </dxi-item>
        <!-- <dxi-item name="exportButton" [disabled]="isEmptyDatagrid"></dxi-item> -->
        
    <dxi-item>
      <dx-button
        text="Apply"
        type="default"
        icon="todo"
        stylingMode="contained"
        [width]="100"
        class="mt-2"
        (onClick)="GET_CUSTOMER_LIST()"
      >
      </dx-button>
    </dxi-item>

    <!-- <dxi-item
        location="after"
        locateInMenu="auto"
        showText="inMenu"
        widget="dxButton"
        [options]="{
          icon: isFilterRowVisible ? 'filter' : 'filter',
          hint: isFilterRowVisible ? 'Hide Filter Row' : 'Show Filter Row',
          onClick: toggleFilterRow,
          stylingMode: 'text',
          elementAttr: { class: 'commonButtons' }
        }"
      ></dxi-item> -->
 <dxi-item name="exportButton"></dxi-item>
    
      </dxo-toolbar>
     
      <dxo-grouping
        [autoExpandAll]="false"
        [contextMenuEnabled]="true"
        [expandMode]="'rowClick'"
      ></dxo-grouping>
      <dxo-header-filter [visible]="true">
        <dxo-search [enabled]="true"></dxo-search>
      </dxo-header-filter>
       <dxo-filter-row
      [visible]="isFilterRowVisible"
      [applyFilter]="auto"
    ></dxo-filter-row>
   <!-- Customer Name -->
  <dxi-column 
    dataField="CUSTOMER_NAME" 
    caption="Customer Name" 
    dataType="string">
  </dxi-column>

    <dxi-column 
    dataField="INVOICE_DATE" 
    caption="Invoice Date" 
    [format]="{ type: 'custom', formatter: formatDates }" 
    dataType="date">
  </dxi-column>

    <dxi-column 
    dataField="BILL_ID" 
    caption="Bill No" 
    dataType="string">
  </dxi-column>

  <!-- Age 0-30 -->
  <dxi-column 
    dataField="AGE_0_30" 
    caption="0 - 30 Days" 
    dataType="number" 
   
     [format]="{ type: 'fixedPoint', precision: 2, useGrouping: true }">
  </dxi-column>

  <!-- Age 31-60 -->
  <dxi-column 
    dataField="AGE_31_60" 
    caption="31 - 60 Days" 
    dataType="number" 
  
   
 [format]="{ type: 'fixedPoint', precision: 2, useGrouping: true }">
  </dxi-column>

  <!-- Age 61-90 -->
  <dxi-column 
    dataField="AGE_61_90" 
    caption="61 - 90 Days" 
    dataType="number" 
 
   [format]="{ type: 'fixedPoint', precision: 2, useGrouping: true }">
  </dxi-column>

  <!-- Age Above 90 -->
  <dxi-column 
    dataField="AGE_91_120" 
    caption="91 - 120 " 
    dataType="number" 
  
 [format]="{ type: 'fixedPoint', precision: 2, useGrouping: true }">
  </dxi-column>

    <!-- Age Above 90 -->
  <dxi-column 
    dataField="AGE_121_150" 
    caption="121 - 150" 
    dataType="number" 
  
 [format]="{ type: 'fixedPoint', precision: 2, useGrouping: true }">
  </dxi-column>
    <!-- Age Above 90 -->
  <dxi-column 
    dataField="AGE_151_180" 
    caption="151 - 180" 
    dataType="number" 
  
 [format]="{ type: 'fixedPoint', precision: 2, useGrouping: true }">
  </dxi-column>


      <!-- Age Above 90 -->
  <dxi-column 
    dataField="AGE_ABOVE_180" 
    caption=" Above 180" 
    dataType="number" 
  
 [format]="{ type: 'fixedPoint', precision: 2, useGrouping: true }">
  </dxi-column>
  

            "AGE_61_90": 0.00,
            "": 0.00,
            "": 0.00,
            "": 0.00,
            "": 0.00,
            "TOTAL_BALANCE": 1320000.00

  <!-- Total Balance -->
  <dxi-column 
    dataField="TOTAL_BALANCE" 
    caption="Total Balance" 
    dataType="number" 
   [format]="{ type: 'fixedPoint', precision: 2, useGrouping: true }">
  </dxi-column>

<!-- Group summary for MAIN_GROUP_NAME -->

     <dxi-column  *ngIf="AgedList_Datasource.length > 0" type="buttons" [width]="100">
  <dxi-button
    hint="View"
    icon="eyeopen"  
    text="View"
[onClick]="onViewClick.bind(this)"
  ></dxi-button>
</dxi-column> 

    </dx-data-grid>
  </div>




  <!-- =============================drildown========================= -->

  
<dx-popup
  [(visible)]="isViewInvoice"
  [width]="'90vw'"
  [height]="'85vh'"
  title="View Invoice"
  (onHiding)="handleClose()"
>
  <ng-container *ngIf="isViewInvoice">
    <app-view-invoice
      [invoiceFormData]="selectedInvoice"
      (popupClosed)="handleClose()"
    ></app-view-invoice>
  </ng-container>
</dx-popup>